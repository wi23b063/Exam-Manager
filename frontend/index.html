<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <title>ExamManager</title>

  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
    crossorigin="anonymous"
  />

  <link rel="stylesheet" href="css/styles.css" />
</head>

<body>

  <!-- SCHÃ–NER HEADER MIT LOGO & BUTTON-NAV -->
  <header class="topbar">
    <div class="container topbar-inner">
      <div class="brand">
        <div class="brand-logo">EM</div>
        <div class="brand-text">
          <div class="brand-title">Exam Manager</div>
          <div class="brand-subtitle">Question &amp; Exam Management</div>
        </div>
      </div>

      <nav class="main-nav">
        <button class="nav-btn active" type="button" data-view="questions">
          Add questions
        </button>
        <button class="nav-btn" type="button" data-view="exams">
          Create Exams
        </button>
      </nav>
    </div>
  </header>

  <main class="container my-4">

    <!-- ========== VIEW 1: FRAGEN HINZUFÃœGEN ========== -->
    <section id="view-questions" class="view">

      <!-- Frage hinzufÃ¼gen -->
      <section class="card p-3">
        <h2>Add question</h2>

        <form id="qForm">

          <!-- Fach -->
          <label for="subject">Subject</label>
          <select id="subject" class="input form-select"></select>

          <!-- Schwierigkeitsgrad -->
          <label for="difficulty" class="mt-2">Difficulty</label>
          <select id="difficulty" class="input form-select">
            <option value="easy">Easy</option>
            <option value="medium">Medium</option>
            <option value="hard">Hard</option>
          </select>

          <!-- Question type -->
          <label for="qtype" class="mt-2">Question type</label>
          <select id="qtype" class="input form-select">
            <option value="SCQ">Single Choice</option>
            <option value="MCQ">Multiple Choice</option>
            <option value="TF">True / False</option>
            <option value="SA">Short Answer (Fill in the Blanks)</option>
            <option value="LA">Long Answer (Essay)</option>
          </select>

          <!-- Question text -->
          <label for="qtext" class="mt-2">Question text</label>
          <textarea id="qtext" class="input form-control" required></textarea>

          <!-----------------------------------EDITOR SECTION je nach QUESTION TYP------------------------------------------------------------>
          <!-- ðŸ”¹ SCQ-Editor (Single Choice) -->
          <div class="q-editor mt-2" data-editor="SCQ">
            <h3 class="h6">Single Choice options</h3>
            <div class="option-row d-flex align-items-center mb-2">
              <input
                type="text"
                placeholder="Option A"
                class="opt-scq input form-control me-2"
              />
              <label>
                <input type="radio" name="scq_correct" value="0" />
                correct
              </label>
            </div>
            <div class="option-row d-flex align-items-center mb-2">
              <input
                type="text"
                placeholder="Option B"
                class="opt-scq input form-control me-2"
              />
              <label>
                <input type="radio" name="scq_correct" value="1" />
                correct
              </label>
            </div>
            <div class="option-row d-flex align-items-center mb-2">
              <input
                type="text"
                placeholder="Option C"
                class="opt-scq input form-control me-2"
              />
              <label>
                <input type="radio" name="scq_correct" value="2" />
                correct
              </label>
            </div>
            <div class="option-row d-flex align-items-center mb-2">
              <input
                type="text"
                placeholder="Option D"
                class="opt-scq input form-control me-2"
              />
              <label>
                <input type="radio" name="scq_correct" value="3" />
                correct
              </label>
            </div>
          </div>

          <!-- ðŸ”¹ MCQ-Editor (Multiple Choice) -->
          <div class="q-editor mt-2" data-editor="MCQ" style="display:none;">
            <h3 class="h6">Multiple Choice options</h3>
            <div class="option-row d-flex align-items-center mb-2">
              <input
                type="text"
                placeholder="Option A"
                class="opt-mcq input form-control me-2"
              />
              <label>
                <input type="checkbox" name="mcq_correct" value="0" />
                correct
              </label>
            </div>
            <div class="option-row d-flex align-items-center mb-2">
              <input
                type="text"
                placeholder="Option B"
                class="opt-mcq input form-control me-2"
              />
              <label>
                <input type="checkbox" name="mcq_correct" value="1" />
                correct
              </label>
            </div>
            <div class="option-row d-flex align-items-center mb-2">
              <input
                type="text"
                placeholder="Option C"
                class="opt-mcq input form-control me-2"
              />
              <label>
                <input type="checkbox" name="mcq_correct" value="2" />
                correct
              </label>
            </div>
            <div class="option-row d-flex align-items-center mb-2">
              <input
                type="text"
                placeholder="Option D"
                class="opt-mcq input form-control me-2"
              />
              <label>
                <input type="checkbox" name="mcq_correct" value="3" />
                correct
              </label>
            </div>
          </div>

          <!-- ðŸ”¹ TF-Editor (True / False) -->
          <div class="q-editor mt-2" data-editor="TF" style="display:none;">
            <h3 class="h6">True / False</h3>
            <div class="mb-2">
              <label>
                <input type="radio" name="tf_correct" value="true" />
                Statement is TRUE
              </label>
            </div>
            <div class="mb-2">
              <label>
                <input type="radio" name="tf_correct" value="false" />
                Statement is FALSE
              </label>
            </div>
          </div>

          <!-- ðŸ”¹ SA-Editor (Short Answer) -->
          <div class="q-editor mt-2" data-editor="SA" style="display:none;">
            <h3 class="h6">Short Answer</h3>
            <p class="small text-muted">
              Write question above. Then enter short correct answer
              answer. In the question text, you can, for example, mark a gap with
              "___".
            </p>
            <input
              type="text"
              id="sa_answer"
              class="input form-control"
              placeholder="korrekte Antwort"
            />
          </div>

          <!-- ðŸ”¹ LA-Editor (Long Answer / Aufsatz) -->
          <div class="q-editor mt-2" data-editor="LA" style="display:none;">
            <h3 class="h6">Long Answer / Essay</h3>
            <p class="small text-muted">
              Optional: answer template
            </p>
            <textarea
              id="la_answer"
              class="input form-control"
              rows="4"
              placeholder="MusterlÃ¶sung oder Stichpunkte"
            ></textarea>
          </div>

          <!-----------------------------EDITOR SECTION END------------------------------------------->

          <!-- Buttons -->
          <button type="submit" id="saveBtn" class="btn btn-primary mt-3">
            Save
          </button>

        </form>
      </section>

      <!-- Fragenliste -->
      <section class="card p-3 mt-4">
        <h2>Questions in Subject</h2>
        <div id="questionList"></div>
      </section>

    </section>

    <!-- ========== VIEW 2: PRÃœFUNGEN ERSTELLEN ========== -->
    <section id="view-exams" class="view d-none">
      <section class="card p-3">
        <h2>Create Exam </h2>

        <form id="examForm">
          <!-- Subject -->
          <label for="examSubject">Subject</label>
          <select id="examSubject" class="form-select mb-2"></select>

          <!-- Exam Name -->
          <label for="examName" class="mt-2">Exam Name</label>
          <input
            type="text"
            id="examName"
            class="form-control"
            placeholder="z.B. Exam 1"
          />

          <!-- Verteilung nach Schwierigkeitsgrad -->
          <h3 class="h6 mt-3">Question Distribution by Difficulty Level</h3>

          <div class="row g-2">
            <div class="col-md-4">
              <label for="countEasy" class="form-label">Easy</label>
              <input
                type="number"
                id="countEasy"
                class="form-control"
                min="0"
                value="0"
                oninput="updateExamTotal()"
              />
            </div>
            <div class="col-md-4">
              <label for="countMedium" class="form-label">Medium</label>
              <input
                type="number"
                id="countMedium"
                class="form-control"
                min="0"
                value="0"
                oninput="updateExamTotal()"
              />
            </div>
            <div class="col-md-4">
              <label for="countHard" class="form-label">Hard</label>
              <input
                type="number"
                id="countHard"
                class="form-control"
                min="0"
                value="0"
                oninput="updateExamTotal()"
              />
            </div>
          </div>

          <div class="mt-2">
            <strong>Total:&nbsp;</strong>
            <span id="examTotal">0</span> questions
          </div>

          <!-- Hinweis & Buttons fÃ¼r Bearbeitungsmodus -->
          <div class="mt-2 d-flex align-items-center flex-wrap gap-2">
            <button
              type="button"
              id="btnCreateAutoExam"
              class="btn btn-success mt-2"
            >
              Create Automatically generated Exam
            </button>

            <button
              type="button"
              id="btnCancelExamEdit"
              class="btn btn-outline-secondary mt-2 d-none"
            >
              Cancel Edit
            </button>

            <small
              id="examEditHint"
              class="text-muted mt-2 d-none"
            >
              Edit Mode: <span id="examEditName"></span>
            </small>
          </div>

          <hr class="my-4" />

          <!-- Detailbereich fÃ¼r Fragen einer PrÃ¼fung -->
          <section class="card p-3 mt-4">
            <h3 class="h6 mb-3">Exam Questions</h3>
            <div id="examDetail" class="small text-muted">
              Select an exam below and click "Details" to view the questions.
              
            </div>
          </section>

          <!-- List of Existing Exams -->
          <h3 class="h6 mt-4">Existing Exams</h3>
          <div id="examList" class="mt-2">
            <!-- Karten mit PrÃ¼fungen werden per JS eingefÃ¼gt -->
          </div>
        </form>
      </section>
    </section>

  </main>

  <script src="js/app.js" defer></script>

  <!-- View-Umschaltung fÃ¼r die Navigation -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const navButtons = document.querySelectorAll("[data-view]");
      const views = document.querySelectorAll(".view");

      navButtons.forEach((btn) => {
        btn.addEventListener("click", function () {
          const target = this.dataset.view; // "questions" oder "exams"

          // Buttons aktiv setzen
          navButtons.forEach((b) => b.classList.toggle("active", b === this));

          // Views zeigen / verstecken
          views.forEach((v) => {
            const isTarget = v.id === "view-" + target;
            v.classList.toggle("d-none", !isTarget);
          });
        });
      });
    });
  </script>
</body>
</html>
