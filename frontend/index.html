<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <title>ExamManager</title>

  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
    crossorigin="anonymous"
  />

  <link rel="stylesheet" href="css/styles.css" />
</head>

<body>

  <!-- SCH√ñNER HEADER MIT LOGO & BUTTON-NAV -->
  <header class="topbar">
    <div class="container topbar-inner">
      <div class="brand">
        <div class="brand-logo">EM</div>
        <div class="brand-text">
          <div class="brand-title">Exam Manager</div>
          <div class="brand-subtitle">Fragen &amp; Pr√ºfungen verwalten</div>
        </div>
      </div>

      <nav class="main-nav">
        <button class="nav-btn active" type="button" data-view="questions">
          Fragen hinzuf√ºgen
        </button>
        <button class="nav-btn" type="button" data-view="exams">
          Pr√ºfungen erstellen
        </button>
      </nav>
    </div>
  </header>

  <main class="container my-4">

    <!-- ========== VIEW 1: FRAGEN HINZUF√úGEN ========== -->
    <section id="view-questions" class="view">

      <!-- Frage hinzuf√ºgen -->
      <section class="card p-3">
        <h2>Frage hinzuf√ºgen</h2>

        <form id="qForm">

          <!-- Fach -->
          <label for="subject">Fach</label>
          <select id="subject" class="input form-select"></select>

          <!-- Schwierigkeitsgrad -->
          <label for="difficulty" class="mt-2">Schwierigkeitsgrad</label>
          <select id="difficulty" class="input form-select">
            <option value="easy">Leicht</option>
            <option value="medium">Mittel</option>
            <option value="hard">Schwer</option>
          </select>

          <!-- Fragetyp -->
          <label for="qtype" class="mt-2">Fragetyp</label>
          <select id="qtype" class="input form-select">
            <option value="SCQ">Single Choice</option>
            <option value="MCQ">Multiple Choice</option>
            <option value="TF">True / False</option>
            <option value="SA">Short Answer (Fill in the Blanks)</option>
            <option value="LA">Long Answer (Essay)</option>
          </select>

          <!-- Fragetext -->
          <label for="qtext" class="mt-2">Fragetext</label>
          <textarea id="qtext" class="input form-control" required></textarea>

          <!-----------------------------------EDITOR SECTION je nach QUESTION TYP------------------------------------------------------------>
          <!-- üîπ SCQ-Editor (Single Choice) -->
          <div class="q-editor mt-2" data-editor="SCQ">
            <h3 class="h6">Single Choice Optionen</h3>
            <div class="option-row d-flex align-items-center mb-2">
              <input
                type="text"
                placeholder="Option A"
                class="opt-scq input form-control me-2"
              />
              <label>
                <input type="radio" name="scq_correct" value="0" />
                korrekt
              </label>
            </div>
            <div class="option-row d-flex align-items-center mb-2">
              <input
                type="text"
                placeholder="Option B"
                class="opt-scq input form-control me-2"
              />
              <label>
                <input type="radio" name="scq_correct" value="1" />
                korrekt
              </label>
            </div>
            <div class="option-row d-flex align-items-center mb-2">
              <input
                type="text"
                placeholder="Option C"
                class="opt-scq input form-control me-2"
              />
              <label>
                <input type="radio" name="scq_correct" value="2" />
                korrekt
              </label>
            </div>
            <div class="option-row d-flex align-items-center mb-2">
              <input
                type="text"
                placeholder="Option D"
                class="opt-scq input form-control me-2"
              />
              <label>
                <input type="radio" name="scq_correct" value="3" />
                korrekt
              </label>
            </div>
          </div>

          <!-- üîπ MCQ-Editor (Multiple Choice) -->
          <div class="q-editor mt-2" data-editor="MCQ" style="display:none;">
            <h3 class="h6">Multiple Choice Optionen</h3>
            <div class="option-row d-flex align-items-center mb-2">
              <input
                type="text"
                placeholder="Option A"
                class="opt-mcq input form-control me-2"
              />
              <label>
                <input type="checkbox" name="mcq_correct" value="0" />
                korrekt
              </label>
            </div>
            <div class="option-row d-flex align-items-center mb-2">
              <input
                type="text"
                placeholder="Option B"
                class="opt-mcq input form-control me-2"
              />
              <label>
                <input type="checkbox" name="mcq_correct" value="1" />
                korrekt
              </label>
            </div>
            <div class="option-row d-flex align-items-center mb-2">
              <input
                type="text"
                placeholder="Option C"
                class="opt-mcq input form-control me-2"
              />
              <label>
                <input type="checkbox" name="mcq_correct" value="2" />
                korrekt
              </label>
            </div>
            <div class="option-row d-flex align-items-center mb-2">
              <input
                type="text"
                placeholder="Option D"
                class="opt-mcq input form-control me-2"
              />
              <label>
                <input type="checkbox" name="mcq_correct" value="3" />
                korrekt
              </label>
            </div>
          </div>

          <!-- üîπ TF-Editor (True / False) -->
          <div class="q-editor mt-2" data-editor="TF" style="display:none;">
            <h3 class="h6">True / False</h3>
            <div class="mb-2">
              <label>
                <input type="radio" name="tf_correct" value="true" />
                Aussage ist WAHR
              </label>
            </div>
            <div class="mb-2">
              <label>
                <input type="radio" name="tf_correct" value="false" />
                Aussage ist FALSCH
              </label>
            </div>
          </div>

          <!-- üîπ SA-Editor (Short Answer) -->
          <div class="q-editor mt-2" data-editor="SA" style="display:none;">
            <h3 class="h6">Short Answer</h3>
            <p class="small text-muted">
              Formuliere die Frage oben. Hier tr√§gst du die korrekte kurze
              Antwort ein. Im Fragetext kannst du z.&nbsp;B. eine L√ºcke mit
              "___" markieren.
            </p>
            <input
              type="text"
              id="sa_answer"
              class="input form-control"
              placeholder="korrekte Antwort"
            />
          </div>

          <!-- üîπ LA-Editor (Long Answer / Aufsatz) -->
          <div class="q-editor mt-2" data-editor="LA" style="display:none;">
            <h3 class="h6">Long Answer / Aufsatz</h3>
            <p class="small text-muted">
              Optional: Musterl√∂sung oder Stichworte, die f√ºr die Bewertung
              wichtig sind.
            </p>
            <textarea
              id="la_answer"
              class="input form-control"
              rows="4"
              placeholder="Musterl√∂sung oder Stichpunkte"
            ></textarea>
          </div>

          <!-----------------------------EDITOR SECTION END------------------------------------------->

          <!-- Buttons -->
          <button type="submit" id="saveBtn" class="btn btn-primary mt-3">
            Speichern
          </button>

        </form>
      </section>

      <!-- Fragenliste -->
      <section class="card p-3 mt-4">
        <h2>Fragen im Fach</h2>
        <div id="questionList"></div>
      </section>

    </section>

    <!-- ========== VIEW 2: PR√úFUNGEN ERSTELLEN ========== -->
    <section id="view-exams" class="view d-none">
      <section class="card p-3">
        <h2>Pr√ºfung erstellen</h2>

        <form id="examForm">
          <!-- Fach -->
          <label for="examSubject">Fach</label>
          <select id="examSubject" class="form-select mb-2"></select>

          <!-- Name der Pr√ºfung -->
          <label for="examName" class="mt-2">Pr√ºfungsname</label>
          <input
            type="text"
            id="examName"
            class="form-control"
            placeholder="z.B. Schularbeit 1"
          />

          <!-- Verteilung nach Schwierigkeitsgrad -->
          <h3 class="h6 mt-3">Fragenverteilung nach Schwierigkeitsgrad</h3>

          <div class="row g-2">
            <div class="col-md-4">
              <label for="countEasy" class="form-label">Leicht</label>
              <input
                type="number"
                id="countEasy"
                class="form-control"
                min="0"
                value="0"
                oninput="updateExamTotal()"
              />
            </div>
            <div class="col-md-4">
              <label for="countMedium" class="form-label">Mittel</label>
              <input
                type="number"
                id="countMedium"
                class="form-control"
                min="0"
                value="0"
                oninput="updateExamTotal()"
              />
            </div>
            <div class="col-md-4">
              <label for="countHard" class="form-label">Schwer</label>
              <input
                type="number"
                id="countHard"
                class="form-control"
                min="0"
                value="0"
                oninput="updateExamTotal()"
              />
            </div>
          </div>

          <div class="mt-2">
            <strong>Summe:&nbsp;</strong>
            <span id="examTotal">0</span> Fragen
          </div>

          <!-- Hinweis & Buttons f√ºr Bearbeitungsmodus -->
          <div class="mt-2 d-flex align-items-center flex-wrap gap-2">
            <button
              type="button"
              id="btnCreateAutoExam"
              class="btn btn-success mt-2"
            >
              Automatische Pr√ºfung erstellen
            </button>

            <button
              type="button"
              id="btnCancelExamEdit"
              class="btn btn-outline-secondary mt-2 d-none"
            >
              Bearbeiten abbrechen
            </button>

            <small
              id="examEditHint"
              class="text-muted mt-2 d-none"
            >
              Bearbeitungsmodus: <span id="examEditName"></span>
            </small>
          </div>

          <hr class="my-4" />

          <!-- Detailbereich f√ºr Fragen einer Pr√ºfung -->
          <section class="card p-3 mt-4">
            <h3 class="h6 mb-3">Pr√ºfungsfragen</h3>
            <div id="examDetail" class="small text-muted">
              W√§hle unten eine Pr√ºfung und klicke auf ‚ÄûDetails‚Äú, um die Fragen
              anzuzeigen.
            </div>
          </section>

          <!-- Liste der bestehenden Pr√ºfungen -->
          <h3 class="h6 mt-4">Bestehende Pr√ºfungen</h3>
          <div id="examList" class="mt-2">
            <!-- Karten mit Pr√ºfungen werden per JS eingef√ºgt -->
          </div>
        </form>
      </section>
    </section>

  </main>

  <script src="js/app.js" defer></script>

  <!-- View-Umschaltung f√ºr die Navigation -->
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const navButtons = document.querySelectorAll("[data-view]");
      const views = document.querySelectorAll(".view");

      navButtons.forEach((btn) => {
        btn.addEventListener("click", function () {
          const target = this.dataset.view; // "questions" oder "exams"

          // Buttons aktiv setzen
          navButtons.forEach((b) => b.classList.toggle("active", b === this));

          // Views zeigen / verstecken
          views.forEach((v) => {
            const isTarget = v.id === "view-" + target;
            v.classList.toggle("d-none", !isTarget);
          });
        });
      });
    });
  </script>
</body>
</html>
